let raw_results=
`AL 37 57 00 Sep 30 Oct 03 Auburn U. at Montgomery
AL 36 58 00 Jul 24 Aug 02 Morning Consult
AL 41 55 00 Jul 02 Jul 09 Auburn U. at Montgomery
AL 38 58 00 Feb 04 Feb 06 Mason-Dixon
AK 46 50 00 Sep 25 Oct 04 Alaska Survey Research
AK 44 50 00 Jul 23 Jul 24 PPP
AK 45 48 00 Jul 07 Jul 08 PPP
AK 48 49 00 Jun 23 Jul 07 Alaska Survey Research
AZ 49 46 00 Oct 02 Oct 11 Morning Consult
AZ 49 43 00 Oct 04 Oct 07 Redfield and Wilton Strategies
AZ 48 46 00 Sep 29 Oct 07 Ipsos
AZ 48 45 00 Sep 28 Oct 06 Latino Decisions
AZ 49 41 00 Oct 01 Oct 03 Siena Coll.
AZ 46 45 00 Sep 28 Oct 05 High Ground Inc.
AZ 50 46 00 Sep 26 Sep 30 Suffolk U.
AZ 49 45 00 Sep 24 Sep 29 Strategies 360
AZ 47 44 00 Sep 23 Sep 26 Redfield and Wilton Strategies
AZ 48 49 00 Sep 15 Sep 20 Langer Research
AZ 47 42 00 Sep 12 Sep 16 Redfield and Wilton Strategies
AZ 47 46 00 Sep 11 Sep 17 Ipsos
AZ 48 46 00 Sep 11 Sep 15 Monmouth U.
AZ 49 40 00 Sep 10 Sep 15 Siena Coll.
AZ 47 44 00 Sep 09 Sep 11 YouGov
AZ 52 42 00 Sep 08 Sep 10 OH Predictive Insights
AZ 45 40 00 Aug 29 Sep 13 Kaiser/Cook
AZ 48 47 00 Aug 28 Sep 08 Benenson Strategy/GS Strategy
AZ 48 43 00 Aug 30 Sep 04 Redfield and Wilton Strategies
AZ 49 40 00 Aug 29 Sep 01 Fox News
AZ 52 42 00 Aug 21 Aug 30 Morning Consult
AZ 47 38 00 Aug 16 Aug 18 Redfield and Wilton Strategies
AZ 53 47 00 Aug 08 Aug 10 Emerson Coll.
AZ 49 45 00 Aug 03 Aug 04 OH Predictive Insights
AZ 46 38 00 Jul 19 Jul 23 Redfield and Wilton Strategies
AZ 49 42 00 Jul 17 Jul 26 Morning Consult
AZ 49 45 00 Jul 18 Jul 24 SSRS
AZ 50 45 00 Jul 14 Jul 22 Marist Coll.
AZ 49 45 00 Jul 17 Jul 18 PPP
AZ 46 46 00 Jul 07 Jul 10 YouGov
AZ 49 44 00 Jul 06 Jul 07 OH Predictive Insights
AZ 43 39 00 Jun 14 Jun 17 Redfield and Wilton Strategies
AZ 49 45 00 Jun 13 Jun 15 Civiqs
AZ 48 41 00 Jun 08 Jun 16 Siena Coll.
AZ 46 42 00 May 30 Jun 02 Fox News
AZ 47 45 00 May 18 May 22 High Ground Inc.
AZ 45 41 00 May 10 May 14 Redfield and Wilton Strategies
AZ 50 43 00 May 09 May 11 OH Predictive Insights
AZ 52 43 00 Apr 07 Apr 08 OH Predictive Insights
AZ 46 43 00 Mar 11 Mar 14 Monmouth U.
AZ 47 46 00 Mar 10 Mar 15 Marist Coll.
AZ 50 42 00 Mar 06 Mar 11 Latino Decisions
AZ 49 43 00 Mar 03 Mar 04 OH Predictive Insights
AZ 48 47 00 Mar 02 Mar 03 PPP
AZ 42 46 00 Feb 11 Feb 15 Climate Nexus
AZ 46 46 00 Jan 02 Jan 04 PPP
AR 45 47 00 Jun 09 Jun 10 Hendrix Coll.
CA 59 32 00 Sep 26 Sep 28 SurveyUSA
CA 62 28 00 Sep 19 Sep 21 Redfield and Wilton Strategies
CA 67 28 00 Sep 09 Sep 15 U. of Calif. at Berkeley
CA 60 31 00 Sep 04 Sep 13 Public Policy Inst. of Calif.
CA 56 28 00 Aug 12 Aug 12 SurveyUSA
CA 61 25 00 Aug 09 Aug 09 Redfield and Wilton Strategies
CA 67 28 00 Jul 21 Jul 27 U.C. Berkeley
CA 57 33 00 May 17 May 26 Public Policy Inst. of Calif.
CA 58 30 00 May 18 May 19 SurveyUSA
CA 65 35 00 May 08 May 09 Emerson Coll.
CA 67 29 00 Mar 28 Mar 29 PPP
CA 59 31 00 Feb 26 Feb 28 YouGov
CA 62 26 00 Feb 24 Mar 02 AtlasIntel
CA 60 35 00 Feb 22 Feb 26 SSRS
CA 58 31 00 Feb 20 Feb 25 U. of California
CA 57 37 00 Feb 13 Feb 16 SurveyUSA
CA 60 30 00 Feb 01 Feb 15 YouGov
CA 59 35 00 Jan 14 Jan 16 SurveyUSA
CO 54 40 00 Oct 02 Oct 11 Morning Consult
CO 50 40 00 Oct 01 Oct 06 SurveyUSA
CO 50 40 00 Aug 30 Sep 05 Fabrizio Ward/Hart Research
CO 51 41 00 Aug 21 Aug 30 Morning Consult
CO 54 41 00 Jul 23 Jul 24 PPP
CO 52 39 00 Jul 17 Jul 26 Morning Consult
CO 56 39 00 Jun 29 Jun 30 PPP
CO 53 40 00 May 07 May 11 Global Strategy
CO 53 35 00 Apr 10 Apr 19 Montana State U.
CO 46 43 00 Feb 15 Feb 19 Climate Nexus
CT 52 32 00 May 19 May 24 SurveyUSA
CT 56 33 00 Apr 30 May 04 Quinnipiac U.
CT 47 34 00 Mar 24 Apr 03 Sacred Heart U.
CT 52 36 00 Feb 24 Mar 12 Sacred Heart U.
DE 54 33 00 Sep 21 Sep 27 U. of Delaware
DE 58 37 00 Aug 21 Aug 22 PPP
DE 56 40 00 Jan 16 Jan 19 Gonzales Research
DC 93 04 00 Jan 02 Jan 02 Election 2016
FL 51 48 00 Oct 10 Oct 12 Emerson Coll.
FL 51 47 00 Oct 09 Oct 11 Florida Atlantic U.
FL 48 46 00 Oct 04 Oct 08 RMG Research
FL 51 46 00 Oct 02 Oct 11 Morning Consult
FL 49 44 00 Oct 04 Oct 06 Redfield and Wilton Strategies
FL 49 45 00 Sep 29 Oct 07 Ipsos
FL 51 40 00 Oct 01 Oct 05 Quinnipiac U.
FL 45 45 00 Oct 01 Oct 04 Suffolk U.
FL 51 45 00 Oct 01 Oct 04 U. of North Florida
FL 47 42 00 Sep 30 Oct 01 Siena Coll.
FL 50 44 00 Sep 27 Oct 02 St. Leo University
FL 48 43 00 Sep 23 Sep 25 Redfield and Wilton Strategies
FL 50 47 00 Sep 21 Sep 22 St. Pete polls
FL 47 51 00 Sep 15 Sep 20 Langer Research
FL 48 46 00 Sep 15 Sep 18 YouGov
FL 47 44 00 Sep 12 Sep 14 Redfield and Wilton Strategies
FL 47 47 00 Sep 11 Sep 16 Ipsos
FL 50 45 00 Sep 10 Sep 13 Monmouth U.
FL 50 50 00 Sep 11 Sep 12 Florida Atlantic U.
FL 50 47 00 Sep 07 Sep 08 St. Pete polls
FL 43 42 00 Aug 29 Sep 13 Kaiser/Cook
FL 48 46 00 Aug 30 Sep 08 Benenson Strategy/GS Strategy
FL 48 48 00 Aug 31 Sep 06 Marist Coll.
FL 47 44 00 Aug 30 Sep 03 Redfield and Wilton Strategies
FL 48 45 00 Aug 28 Sep 01 Quinnipiac U.
FL 49 47 00 Aug 21 Aug 30 Morning Consult
FL 50 43 00 Aug 21 Aug 26 Opinium
FL 48 44 00 Aug 21 Aug 22 PPP
FL 49 41 00 Aug 16 Aug 16 Redfield and Wilton Strategies
FL 43 43 00 Jul 21 Jul 23 Zogby Analytics
FL 49 46 00 Jul 17 Jul 26 Morning Consult
FL 50 46 00 Jul 20 Jul 23 Mason Dixon
FL 51 46 00 Jul 18 Jul 24 SSRS
FL 48 41 00 Jul 19 Jul 21 Redfield and Wilton Strategies
FL 51 38 00 Jul 16 Jul 20 Quinnipiac U.
FL 50 44 00 Jul 13 Jul 14 St. Pete polls
FL 48 42 00 Jul 07 Jul 10 YouGov
FL 49 40 00 Jun 20 Jun 23 Fox News
FL 45 41 00 Jun 14 Jun 15 Redfield and Wilton Strategies
FL 47 41 00 Jun 08 Jun 18 Siena Coll.
FL 51 40 00 Jun 09 Jun 11 TIPP
FL 48 47 00 May 26 May 27 St. Pete Polls
FL 47 44 00 May 18 May 30 Cygnal
FL 45 43 00 May 10 May 14 Redfield and Wilton Strategies
FL 53 47 00 May 08 May 12 Florida Atlantic U.
FL 46 43 00 Apr 18 Apr 21 Fox News
FL 46 42 00 Apr 16 Apr 20 Quinnipiac U.
FL 48 48 00 Apr 16 Apr 17 St. Pete Polls
FL 46 40 00 Mar 31 Apr 04 U. of North Florida
FL 45 45 00 Mar 14 Mar 16 AtlasIntel
FL 45 48 00 Mar 06 Mar 12 Latino Decisions
FL 49 51 00 Mar 05 Mar 07 Florida Atlantic U.
FL 49 48 00 Feb 10 Feb 18 U. of North Florida
FL 51 49 00 Jan 09 Jan 12 Florida Atlantic U.
GA 47 46 00 Oct 08 Oct 09 PPP
GA 47 49 00 Oct 02 Oct 11 Morning Consult
GA 46 48 00 Sep 27 Oct 06 U. of Georgia.
GA 50 47 00 Sep 26 Sep 29 Civiqs
GA 50 47 00 Sep 23 Sep 27 Quinnipiac U.
GA 45 44 00 Sep 23 Sep 26 Redfield and Wilton Strategies
GA 46 47 00 Sep 22 Sep 25 YouGov
GA 46 48 00 Sep 17 Sep 21 Monmouth U.
GA 45 45 00 Sep 16 Sep 21 Siena Coll.
GA 47 47 00 Sep 11 Sep 20 U. of Georgia
GA 45 46 00 Sep 12 Sep 16 Redfield and Wilton Strategies
GA 47 46 00 Aug 30 Sep 05 Fabrizio Ward/Hart Research
GA 49 46 00 Aug 21 Aug 30 Morning Consult
GA 52 46 00 Aug 20 Aug 30 HarrisX
GA 47 46 00 Aug 24 Aug 25 PPP
GA 46 44 00 Aug 06 Aug 08 SurveyUSA
GA 46 45 00 Jul 28 Jul 31 YouGov
GA 47 48 00 Jul 23 Jul 27 Monmouth U.
GA 46 45 00 Jul 23 Jul 24 PPP
GA 47 46 00 Jul 17 Jul 26 Morning Consult
GA 49 45 00 Jun 25 Jun 26 PPP
GA 47 45 00 Jun 20 Jun 23 Fox News
GA 48 46 00 Jun 12 Jun 13 PPP
GA 40 44 00 May 21 May 27 TargetSmart
GA 48 47 00 May 16 May 18 Civiqs
GA 44 45 00 Apr 25 Apr 27 Cygnal
GA 43 51 00 Feb 24 Mar 02 U. of Georgia
HI 65 28 00 Jan 02 Jan 02 Election 2016
ID 29 58 00 Jan 02 Jan 02 Election 2016
IL 53 40 00 Sep 23 Sep 26 Victory Research
IN 38 55 00 Jul 24 Aug 02 Morning Consult
IN 39 49 00 May 21 May 23 Victoria Research
IN 39 52 00 Apr 10 Apr 13 Change Research
IA 49 49 00 Oct 06 Oct 09 YouGov
IA 48 47 00 Oct 03 Oct 06 Civiqs
IA 50 45 00 Oct 01 Oct 05 Quinnipiac U.
IA 48 46 00 Sep 23 Sep 26 RABA Research
IA 46 49 00 Sep 18 Sep 22 Monmouth U.
IA 45 42 00 Sep 16 Sep 22 Siena Coll.
IA 47 47 00 Sep 14 Sep 17 Selzer
IA 45 47 00 Aug 30 Sep 05 Fabrizio Ward/Hart Research
IA 46 48 00 Jul 30 Aug 03 Monmouth U.
IA 40 41 00 Jul 27 Jul 30 RMG Research
IA 47 48 00 Jul 23 Jul 24 PPP
IA 43 44 00 Jun 07 Jun 10 Selzer
IA 46 46 00 Jun 06 Jun 08 Civiqs
IA 47 48 00 Jun 03 Jun 04 PPP
IA 46 48 00 Apr 30 May 01 PPP
IA 41 51 00 Mar 02 Mar 05 Selzer
IA 44 46 00 Jan 20 Jan 23 Siena Coll.
KS 42 52 00 Sep 26 Sep 29 Civiqs
KS 41 48 00 Aug 05 Aug 09 SurveyUSA
KS 43 50 00 Aug 05 Aug 06 PPP
KS 40 52 00 May 30 Jun 01 Civiqs
KS 40 52 00 Mar 10 Mar 11 PPP
KS 43 51 00 Jan 30 Feb 06 DFM Research
KY 38 58 00 Sep 10 Sep 14 Quinnipiac U.
KY 41 50 00 Jul 30 Aug 03 Quinnipiac U.
KY 35 59 00 Jul 24 Aug 02 Morning Consult
KY 37 57 00 Jun 13 Jun 15 Civiqs
KY 36 53 00 May 21 May 24 RMG Research
KY 39 55 00 May 14 May 15 PPP
LA 38 58 00 Jan 02 Jan 02 Election 2016
ME 51 40 00 Sep 25 Oct 04 Critical Insights
ME 50 39 00 Sep 17 Sep 23 Colby Coll.
ME 51 39 00 Sep 17 Sep 20 Suffolk U.
ME 55 38 00 Sep 11 Sep 16 Siena Coll.
ME 59 38 00 Sep 10 Sep 14 Quinnipiac U.
ME 54 40 00 Aug 30 Sep 05 Fabrizio Ward/Hart Research
ME 45 38 00 Jul 28 Aug 09 Critical Insights
ME 52 37 00 Jul 30 Aug 03 Quinnipiac U.
ME 50 39 00 Jul 27 Aug 02 RMG Research
ME 53 42 00 Jul 23 Jul 24 PPP
ME 50 38 00 Jul 18 Jul 24 Colby College
ME 53 42 00 Jul 02 Jul 03 PPP
ME 52 42 00 Mar 02 Mar 03 PPP
MD 61 30 00 Sep 30 Oct 04 Goucher College
MD 62 30 00 Sep 04 Sep 11 OpinionWorks
MD 59 35 00 May 19 May 23 Gonzales Research
MD 60 35 00 Feb 13 Feb 19 Goucher Coll.
MA 69 31 00 Aug 25 Aug 27 Emerson Coll.
MA 63 27 00 Aug 06 Aug 09 MassINC
MA 61 28 00 Jul 31 Aug 07 YouGov
MA 55 23 00 Jul 17 Jul 20 MassINC
MA 67 33 00 May 05 May 06 Emerson Coll.
MA 58 30 00 Apr 27 May 01 U. of Mass.
MA 69 31 00 Apr 04 Apr 07 Emerson Coll.
MI 51 43 00 Oct 07 Oct 13 Ipsos
MI 48 40 00 Oct 06 Oct 11 Siena Coll.
MI 52 46 00 Oct 06 Oct 09 YouGov
MI 51 44 00 Oct 02 Oct 11 Morning Consult
MI 54 43 00 Oct 06 Oct 07 Emerson Coll.
MI 50 42 00 Oct 04 Oct 06 Redfield and Wilton Strategies
MI 50 43 00 Sep 30 Oct 08 Baldwin Wallace U.
MI 51 43 00 Sep 29 Oct 06 Ipsos
MI 48 39 00 Sep 30 Oct 03 Glengariff Group
MI 50 44 00 Sep 30 Oct 01 PPP
MI 51 42 00 Sep 23 Sep 26 Redfield and Wilton Strategies
MI 52 44 00 Sep 19 Sep 23 Marist Coll.
MI 46 41 00 Sep 14 Sep 19 Marketing Resource Grp.
MI 50 42 00 Sep 08 Sep 22 Baldwin Wallace U.
MI 51 45 00 Sep 10 Sep 21 YouGov
MI 49 39 00 Sep 12 Sep 14 Redfield and Wilton Strategies
MI 49 44 00 Sep 11 Sep 16 Ipsos
MI 53 42 00 Sep 11 Sep 15 Civiqs
MI 48 40 00 Sep 10 Sep 15 EPIC-MRA
MI 47 42 00 Sep 01 Sep 03 Glengariff Group
MI 50 43 00 Aug 28 Sep 08 Benenson Strategy/GS Strategy
MI 53 44 00 Sep 02 Sep 03 Pulse Opinion Research
MI 51 40 00 Aug 30 Sep 03 Redfield and Wilton Strategies
MI 48 44 00 Aug 28 Aug 29 PPP
MI 52 42 00 Aug 21 Aug 30 Morning Consult
MI 50 38 00 Aug 16 Aug 18 Redfield and Wilton Strategies
MI 49 46 00 Aug 13 Aug 17 Civiqs
MI 47 43 00 Jul 27 Aug 06 YouGov
MI 49 43 00 Jul 28 Jul 29 PPP
MI 51 40 00 Jul 25 Jul 30 EPIC-MRA
MI 48 42 00 Jul 21 Jul 24 YouGov
MI 49 37 00 Jul 19 Jul 24 Redfield and Wilton Strategies
MI 52 40 00 Jul 18 Jul 24 SSRS
MI 52 42 00 Jul 17 Jul 26 Morning Consult
MI 49 40 00 Jul 18 Jul 20 Fox News
MI 51 44 00 Jul 09 Jul 10 PPP
MI 50 44 00 Jun 26 Jun 27 PPP
MI 47 36 00 Jun 14 Jun 16 Redfield and Wilton Strategies
MI 47 36 00 Jun 08 Jun 17 Siena Coll.
MI 51 38 00 Jun 09 Jun 12 TIPP
MI 50 35 00 May 31 Jun 07 Kiaer Research
MI 53 41 00 May 30 Jun 03 EPIC-MRA
MI 50 44 00 May 29 May 30 PPP
MI 51 45 00 May 18 May 19 PPP
MI 47 39 00 May 10 May 14 Redfield and Wilton Strategies
MI 50 42 00 Apr 28 Apr 29 PPP
MI 51 44 00 Apr 20 Apr 21 PPP
MI 49 41 00 Apr 18 Apr 21 Fox News
MI 46 38 00 Apr 15 Apr 20 Ipsos
MI 47 42 00 Mar 17 Mar 25 Baldwin Wallace U.
MI 44 41 00 Mar 16 Mar 20 Marketing Resource
MI 44 46 00 Mar 07 Mar 09 AtlasIntel
MI 45 41 00 Mar 06 Mar 08 YouGov
MI 48 41 00 Mar 05 Mar 08 Monmouth U.
MI 46 43 00 Feb 11 Feb 20 YouGov
MI 47 43 00 Feb 12 Feb 18 Quinnipiac U.
MI 43 43 00 Feb 06 Feb 18 Expedition Strategies
MI 50 44 00 Jan 09 Jan 12 EPIC-MRA
MI 50 43 00 Jan 03 Jan 07 Glengariff
MN 50 44 00 Oct 02 Oct 11 Morning Consult
MN 47 40 00 Oct 01 Oct 06 SurveyUSA
MN 47 40 00 Sep 20 Sep 24 Suffolk U.
MN 48 42 00 Sep 21 Sep 23 Mason Dixon
MN 51 42 00 Sep 12 Sep 17 Redfield and Wilton Strategies
MN 50 41 00 Sep 09 Sep 11 YouGov
MN 57 41 00 Sep 08 Sep 13 Langer Research
MN 50 41 00 Sep 08 Sep 10 Siena Coll.
MN 48 44 00 Sep 04 Sep 13 Morning Consult
MN 49 40 00 Sep 04 Sep 07 SurveyUSA
MN 52 44 00 Sep 03 Sep 04 PPP
MN 50 43 00 Aug 21 Aug 30 Morning Consult
MN 51 49 00 Aug 08 Aug 10 Emerson Coll.
MN 52 42 00 Jul 22 Jul 23 PPP
MN 47 44 00 Jul 17 Jul 26 Morning Consult
MN 51 38 00 Jul 18 Jul 20 Fox News
MN 49 44 00 May 18 May 20 Mason-Dixon Polling
MS 41 56 00 Feb 26 Feb 28 Mason-Dixon
MO 43 52 00 Sep 24 Oct 07 YouGov
MO 45 53 00 Sep 16 Sep 17 Missouri Scout
MO 44 49 00 Sep 01 Sep 03 We Ask America
MO 43 50 00 Jun 23 Jul 01 YouGov
MO 44 48 00 May 26 May 27 We Ask America
MO 42 52 00 Feb 26 Feb 27 Remington Research
MT 46 52 00 Oct 09 Oct 10 PPP
MT 43 56 00 Oct 05 Oct 07 Emerson Coll.
MT 42 49 00 Sep 14 Sep 16 Siena Coll.
MT 43 50 00 Aug 30 Sep 05 Fabrizio Ward/Hart Research
MT 42 53 00 Jul 31 Aug 02 Emerson Coll.
MT 45 50 00 Jul 23 Jul 24 PPP
MT 45 49 00 Jul 11 Jul 13 Civiqs
MT 42 51 00 Jul 09 Jul 10 PPP
MT 38 52 00 Jun 17 Jun 26 U. of Montana
MT 40 45 00 Apr 10 Apr 27 Montana State U.
MT 34 46 00 Feb 12 Feb 22 U. of Montana
NE 33 61 00 Jan 02 Jan 02 Election 2016
NV 52 46 00 Oct 06 Oct 09 YouGov
NV 48 42 00 Oct 02 Oct 06 Siena Coll.
NV 52 41 00 Sep 20 Sep 23 Fox News
NV 46 41 00 Sep 10 Sep 25 U. of Nevada
NV 46 42 00 Sep 08 Sep 10 Siena Coll.
NV 44 39 00 Aug 20 Aug 30 U. of Nevada
NV 44 41 00 Feb 19 Feb 21 AtlasIntel
NV 47 39 00 Jan 05 Jan 08 Fox News
NH 55 43 00 Oct 09 Oct 12 U. of New Hampshire
NH 53 41 00 Oct 01 Oct 04 St. Anselm Coll.
NH 53 45 00 Sep 30 Oct 01 Emerson Coll.
NH 53 44 00 Sep 24 Sep 28 U. of New Hampshire
NH 53 44 00 Sep 25 Sep 28 ARG
NH 56 42 00 Sep 23 Sep 25 Pulse Opinion Research
NH 53 44 00 Sep 17 Sep 25 U. of Mass.
NH 45 42 00 Sep 08 Sep 11 Siena Coll.
NH 51 43 00 Aug 15 Aug 17 St. Anselm Coll.
NH 53 40 00 Jul 16 Jul 28 U. of New Hampshire
NH 52 39 00 Jun 18 Jun 22 U. of New Hampshire
NH 49 42 00 Jun 13 Jun 16 St. Anselm College
NH 44 46 00 May 14 May 18 U. of New Hampshire
NH 50 42 00 Apr 23 Apr 27 St. Anselm College
NH 44 46 00 Feb 19 Feb 25 U. of New Hampshire
NH 44 46 00 Feb 08 Feb 10 AtlasIntel
NH 51 43 00 Jan 20 Jan 23 Marist Coll.
NJ 53 38 00 Sep 30 Oct 05 Fairleigh Dickinson U.
NJ 58 40 00 Sep 04 Sep 07 Emerson Coll.
NJ 52 33 00 Aug 05 Aug 13 DKC Analytics
NJ 51 33 00 Jul 07 Jul 12 DKC Analytics
NJ 54 35 00 Apr 30 May 04 Quinnipiac U.
NJ 56 33 00 Apr 22 May 02 Rutgers-Eagleton
NJ 54 38 00 Apr 16 Apr 19 Monmouth U.
NJ 53 35 00 Feb 12 Feb 16 Fairleigh Dickinson U.
NM 53 39 00 Sep 30 Oct 01 PPP
NM 54 39 00 Aug 26 Sep 02 Research and Polling
NM 53 39 00 Jun 12 Jun 13 PPP
NM 52 40 00 Apr 20 Apr 21 PPP
NM 54 46 00 Jan 03 Jan 06 Emerson Coll.
NY 61 29 00 Sep 27 Sep 29 Siena Coll.
NY 63 32 00 Aug 21 Aug 22 PPP
NY 57 32 00 Jun 23 Jun 25 Siena Coll.
NY 57 32 00 May 17 May 21 Siena Coll.
NY 55 32 00 Apr 30 May 04 Quinnipiac U.
NY 65 29 00 Apr 19 Apr 23 Siena Coll.
NY 58 33 00 Mar 22 Mar 26 Siena Coll.
NY 55 36 00 Feb 16 Feb 20 Siena Coll.
NC 48 47 00 Oct 07 Oct 13 Ipsos
NC 50 45 00 Oct 08 Oct 11 SurveyUSA
NC 50 46 00 Oct 08 Oct 11 Monmouth U.
NC 50 46 00 Oct 02 Oct 11 Morning Consult
NC 49 44 00 Oct 04 Oct 06 Redfield and Wilton Strategies
NC 50 46 00 Oct 04 Oct 05 PPP
NC 50 47 00 Oct 02 Oct 04 East Carolina U.
NC 47 47 00 Sep 29 Oct 06 Ipsos
NC 47 45 00 Sep 23 Sep 26 Redfield and Wilton Strategies
NC 48 46 00 Sep 22 Sep 25 YouGov
NC 48 49 00 Sep 18 Sep 25 U. of Mass.
NC 46 45 00 Sep 18 Sep 22 Meredith Coll.
NC 44 45 00 Sep 17 Sep 20 Harper Polling
NC 51 49 00 Sep 16 Sep 18 Emerson Coll.
NC 45 44 00 Sep 11 Sep 16 Siena Coll.
NC 47 45 00 Sep 12 Sep 15 Redfield and Wilton Strategies
NC 47 47 00 Sep 11 Sep 16 Ipsos
NC 47 43 00 Sep 11 Sep 14 Suffolk U.
NC 47 47 00 Sep 09 Sep 13 SurveyUSA
NC 49 46 00 Sep 09 Sep 13 SSRS
NC 48 49 00 Sep 07 Sep 08 Pulse Opinion Research
NC 45 43 00 Aug 29 Sep 13 Kaiser/Cook
NC 48 48 00 Aug 28 Sep 08 Benenson Strategy/GS Strategy
NC 43 44 00 Aug 30 Sep 03 Redfield and Wilton Strategies
NC 48 46 00 Aug 29 Sep 01 Monmouth U.
NC 50 46 00 Aug 29 Sep 01 Fox News
NC 47 49 00 Aug 29 Aug 30 East Carolina U.
NC 49 47 00 Aug 21 Aug 30 Morning Consult
NC 49 46 00 Aug 14 Aug 23 Morning Consult
NC 44 46 00 Aug 16 Aug 17 Redfield and Wilton Strategies
NC 47 47 00 Aug 12 Aug 13 East Carolina U.
NC 49 51 00 Aug 08 Aug 10 Emerson Coll.
NC 45 44 00 Aug 06 Aug 10 Harper Polling
NC 47 48 00 Aug 06 Aug 07 Pulse Opinion Research
NC 49 46 00 Jul 30 Jul 31 PPP
NC 48 44 00 Jul 28 Jul 31 YouGov
NC 49 46 00 Jul 23 Jul 24 PPP
NC 44 40 00 Jul 21 Jul 23 Zogby Analytics
NC 47 47 00 Jul 17 Jul 26 Morning Consult
NC 43 42 00 Jul 19 Jul 21 Redfield and Wilton Strategies
NC 51 44 00 Jul 14 Jul 22 Marist Coll.
NC 50 46 00 Jul 07 Jul 08 PPP
NC 45 44 00 Jun 22 Jun 25 East Carolina U.
NC 48 46 00 Jun 22 Jun 23 PPP
NC 47 45 00 Jun 20 Jun 23 Fox News
NC 46 40 00 Jun 14 Jun 17 Redfield and Wilton Strategies
NC 49 40 00 Jun 08 Jun 18 Siena Coll.
NC 49 45 00 Jun 02 Jun 03 PPP
NC 44 47 00 May 26 May 28 Harper Polling
NC 42 42 00 May 12 May 21 Neighborhood Research and Media
NC 45 43 00 May 10 May 14 Redfield and Wilton Strategies
NC 47 47 00 May 09 May 13 Meeting Street Insights
NC 43 46 00 May 07 May 09 East Carolina University
NC 49 46 00 May 02 May 04 Civiqs
NC 47 40 00 Apr 27 Apr 28 Meredith College
NC 50 45 00 Apr 23 Apr 26 SurveyUSA
NC 49 46 00 Apr 20 Apr 21 PPP
NC 48 47 00 Apr 14 Apr 15 PPP
NC 42 49 00 Apr 05 Apr 07 Harper Polling
NC 48 46 00 Feb 27 Feb 28 East Carolina U.
NC 45 49 00 Feb 23 Feb 27 Marist Coll.
NC 46 44 00 Feb 15 Feb 19 Climate Nexus
NC 45 49 00 Feb 13 Feb 16 WRAL-TV
NC 49 45 00 Feb 13 Feb 16 SurveyUSA
ND 38 55 00 Mar 03 Mar 05 DFM Research
ND 38 57 00 Jan 28 Feb 01 DFM Research
OH 46 49 00 Oct 02 Oct 11 Morning Consult
OH 45 44 00 Oct 02 Oct 06 Siena Coll.
OH 45 47 00 Sep 30 Oct 08 Baldwin Wallace U.
OH 47 47 00 Sep 30 Oct 02 YouGov
OH 50 45 00 Sep 20 Sep 23 Fox News
OH 48 47 00 Sep 17 Sep 21 Quinnipiac U.
OH 45 44 00 Sep 08 Sep 22 Baldwin Wallace U.
OH 45 48 00 Sep 11 Sep 15 Civiqs
OH 51 47 00 Sep 01 Sep 02 Pulse Opinion Research
OH 45 50 00 Aug 21 Aug 30 Morning Consult
OH 47 47 00 Aug 13 Aug 17 Civiqs
OH 47 46 00 Jul 28 Aug 03 TargetSmart
OH 43 41 00 Jul 21 Jul 23 Zogby Analytics
OH 45 46 00 Jul 21 Jul 24 YouGov
OH 45 48 00 Jul 17 Jul 26 Morning Consult
OH 50 46 00 Jul 15 Jul 16 Pulse Opinion Research
OH 46 42 00 Jun 24 Jul 15 U. of Akron
OH 46 45 00 Jun 18 Jun 22 Quinnipiac U.
OH 45 43 00 May 30 Jun 02 Fox News
OH 49 51 00 May 08 May 10 Emerson Coll.
OH 45 44 00 Apr 20 Apr 25 Baldwin Wallace U.
OH 43 47 00 Mar 17 Mar 25 Baldwin Wallace U.
OH 49 45 00 Mar 10 Mar 15 Marist Coll.
OK 35 60 00 Sep 02 Sep 08 Sooner Poll
OK 36 55 00 Jun 03 Jun 04 Amber Integrated
OK 33 57 00 Mar 05 Mar 08 Amber Integrated
OK 34 62 00 Feb 10 Feb 13 Cole Hargrave Snodgrass
OR 56 39 00 Sep 26 Sep 29 Civiqs
OR 51 39 00 Sep 03 Sep 08 DHM Research
PA 51 44 00 Oct 06 Oct 11 Ipsos
PA 52 44 00 Oct 02 Oct 11 Morning Consult
PA 49 42 00 Oct 04 Oct 06 Redfield and Wilton Strategies
PA 50 45 00 Oct 04 Oct 05 Emerson Coll.
PA 50 45 00 Sep 30 Oct 08 Baldwin Wallace U.
PA 54 41 00 Oct 01 Oct 05 Quinnipiac U.
PA 50 45 00 Sep 29 Oct 05 Ipsos
PA 54 43 00 Sep 30 Oct 04 Monmouth U.
PA 49 42 00 Sep 30 Oct 02 Siena Coll.
PA 51 44 00 Sep 30 Oct 02 YouGov
PA 49 40 00 Sep 25 Sep 27 Siena Coll.
PA 50 45 00 Sep 24 Sep 26 TIPP
PA 50 44 00 Sep 23 Sep 25 Redfield and Wilton Strategies
PA 54 45 00 Sep 21 Sep 26 Langer Research
PA 51 44 00 Sep 20 Sep 23 Fox News
PA 48 42 00 Sep 14 Sep 20 Franklin+Marshall Coll.
PA 47 45 00 Sep 08 Sep 22 Baldwin Wallace U.
PA 49 45 00 Sep 10 Sep 21 YouGov
PA 49 44 00 Sep 12 Sep 14 Redfield and Wilton Strategies
PA 49 46 00 Sep 11 Sep 16 Ipsos
PA 52 45 00 Sep 11 Sep 15 Civiqs
PA 48 43 00 Sep 08 Sep 11 Climate Nexus
PA 51 44 00 Sep 03 Sep 06 TargetSmart
PA 53 44 00 Aug 31 Sep 07 Marist Coll.
PA 49 46 00 Aug 28 Sep 08 Benenson Strategy/GS Strategy
PA 48 43 00 Aug 30 Sep 03 Redfield and Wilton Strategies
PA 52 44 00 Aug 28 Sep 01 Quinnipiac U.
PA 49 46 00 Aug 28 Aug 31 Monmouth U.
PA 48 48 00 Aug 25 Aug 27 Pulse Opinion Research
PA 49 45 00 Aug 21 Aug 30 Morning Consult
PA 49 42 00 Aug 17 Aug 23 Franklin+Marshall Coll.
PA 48 41 00 Aug 16 Aug 17 Redfield and Wilton Strategies
PA 51 44 00 Aug 13 Aug 17 Civiqs
PA 49 45 00 Aug 11 Aug 17 Muhlenberg Coll.
PA 53 47 00 Aug 08 Aug 10 Emerson Coll.
PA 49 43 00 Aug 04 Aug 07 YouGov
PA 50 41 00 Jul 20 Jul 26 Franklin+Marshall Coll.
PA 44 43 00 Jul 21 Jul 23 Zogby Analytics
PA 50 42 00 Jul 17 Jul 26 Morning Consult
PA 48 41 00 Jul 19 Jul 21 Redfield and Wilton Strategies
PA 50 39 00 Jul 18 Jul 20 Fox News
PA 51 46 00 Jul 15 Jul 16 Pulse Opinion Research
PA 52 42 00 Jul 09 Jul 13 Monmouth U.
PA 49 39 00 Jun 14 Jun 16 Redfield and Wilton Strategies
PA 50 40 00 Jun 08 Jun 16 Siena Coll.
PA 48 39 00 May 10 May 14 Redfield and Wilton Strategies
PA 49 43 00 Apr 21 Apr 26 Harper Polling
PA 51 44 00 Apr 20 Apr 21 PPP
PA 50 42 00 Apr 18 Apr 21 Fox News
PA 46 40 00 Apr 15 Apr 20 Ipsos
PA 45 46 00 Mar 17 Mar 25 Baldwin Wallace U.
PA 46 40 00 Mar 06 Mar 08 YouGov
PA 47 47 00 Feb 12 Feb 20 Muhlenberg Coll.
PA 46 45 00 Feb 11 Feb 20 YouGov
PA 50 42 00 Feb 12 Feb 18 Quinnipiac U.
PA 47 42 00 Feb 06 Feb 18 Expedition Strategies
RI 55 40 00 Jan 02 Jan 02 Election 2016
SC 42 54 00 Oct 02 Oct 11 Morning Consult
SC 47 48 00 Sep 23 Sep 27 Quinnipiac U.
SC 42 52 00 Sep 22 Sep 25 YouGov
SC 44 50 00 Sep 11 Sep 20 Morning Consult
SC 45 51 00 Sep 10 Sep 14 Quinnipiac U.
SC 42 47 00 Jul 30 Aug 03 Quinnipiac U.
SC 44 49 00 Jul 24 Aug 02 Morning Consult
SC 42 52 00 May 23 May 26 Civiqs
SC 48 52 00 Feb 28 Mar 02 Emerson Coll.
SC 42 48 00 Feb 25 Feb 28 AtlasIntel
SC 40 52 00 Jan 31 Feb 02 East Carolina U.
SD 32 62 00 Jan 02 Jan 02 Election 2016
TN 42 51 00 May 05 May 22 SSRS
TN 36 53 00 Apr 22 May 01 East Tennessee State U.
TN 39 55 00 Jan 28 Jan 30 Mason-Dixon
TX 50 49 00 Oct 07 Oct 08 PPP
TX 47 49 00 Oct 02 Oct 11 Morning Consult
TX 44 51 00 Oct 05 Oct 06 Pulse Opinion Research
TX 48 48 00 Oct 03 Oct 06 Civiqs
TX 45 50 00 Sep 25 Oct 04 YouGov
TX 48 48 00 Sep 25 Sep 26 PPP
TX 46 50 00 Sep 18 Sep 25 U. of Mass.
TX 43 46 00 Sep 16 Sep 22 Siena Coll.
TX 45 50 00 Sep 17 Sep 21 Quinnipiac U.
TX 46 48 00 Sep 15 Sep 18 YouGov
TX 47 48 00 Sep 01 Sep 02 PPP
TX 46 48 00 Aug 28 Sep 02 U. of Texas
TX 47 48 00 Aug 21 Aug 30 Morning Consult
TX 48 47 00 Aug 21 Aug 22 PPP
TX 41 48 00 Aug 04 Aug 13 YouGov
TX 47 46 00 Jul 24 Aug 02 Morning Consult
TX 47 45 00 Jul 17 Jul 26 Morning Consult
TX 45 44 00 Jul 16 Jul 20 Quinnipiac U.
TX 45 46 00 Jul 07 Jul 10 YouGov
TX 48 43 00 Jun 29 Jul 07 U. of Texas
TX 44 48 00 Jun 19 Jun 29 YouGov
TX 48 46 00 Jun 24 Jun 25 PPP
TX 45 44 00 Jun 20 Jun 23 Fox News
TX 46 48 00 Jun 18 Jun 19 PPP
TX 48 48 00 Jun 03 Jun 04 PPP
TX 43 44 00 May 28 Jun 01 Quinnipiac U.
TX 48 52 00 May 08 May 10 Emerson Coll.
TX 47 46 00 Apr 27 Apr 28 PPP
TX 43 43 00 Apr 18 Apr 27 U. of Texas
TX 44 49 00 Apr 10 Apr 19 YouGov
TX 43 47 00 Feb 24 Mar 02 AtlasIntel
TX 45 49 00 Feb 23 Feb 27 Marist Coll.
TX 48 47 00 Feb 22 Feb 26 SSRS
TX 44 45 00 Feb 17 Feb 26 U. of Texas
TX 43 47 00 Jan 31 Feb 09 YouGov
TX 44 46 00 Jan 21 Jan 30 U. of Texas
TX 40 54 00 Jan 16 Jan 21 Data for Progress
TX 46 51 00 Jan 10 Jan 19 Texas Lyceum
UT 40 50 00 Sep 26 Oct 04 Y2 Analytics
UT 35 53 00 Sep 07 Sep 12 RMG Research
UT 31 50 00 Jul 27 Aug 01 RMG Research
UT 41 44 00 May 09 May 15 Y2 Analytics
UT 41 46 00 Mar 21 Mar 30 Y2 Analytics
UT 31 49 00 Jan 15 Jan 22 RMG Research
VT 56 32 00 Sep 03 Sep 15 Braun Research
VA 48 43 00 Sep 09 Sep 21 Christopher Newport U.
VA 53 39 00 Aug 28 Sep 07 Virginia Commonwealth U.
VA 53 39 00 Aug 09 Aug 22 Roanoke Coll.
VA 52 41 00 Jul 17 Jul 26 Morning Consult
VA 50 39 00 Jul 11 Jul 19 Virginia Commonwealth U.
VA 51 39 00 May 03 May 16 Roanoke Coll.
VA 51 41 00 Mar 25 Apr 08 Virginia Commonwealth U.
VA 45 38 00 Feb 25 Feb 28 Hampton University
VA 48 40 00 Feb 09 Feb 18 Roanoke Coll.
WA 55 34 00 Oct 08 Oct 12 SurveyUSA
WA 58 36 00 Sep 08 Sep 14 Strategies 360
WA 62 28 00 Jul 22 Jul 27 SurveyUSA
WA 59 37 00 May 19 May 20 PPP
WA 57 31 00 May 16 May 19 SurveyUSA
WA 52 39 00 Mar 31 Apr 06 EMC Research
WA 57 34 00 Mar 04 Mar 06 SurveyUSA
WV 39 53 00 Oct 01 Oct 06 Research America Inc.
WV 38 56 00 Sep 29 Sep 30 Triton Polling and Res.
WI 51 41 00 Oct 08 Oct 11 Siena Coll.
WI 51 44 00 Oct 06 Oct 11 Ipsos
WI 51 44 00 Oct 02 Oct 11 Morning Consult
WI 51 41 00 Oct 04 Oct 07 Redfield and Wilton Strategies
WI 49 43 00 Sep 30 Oct 08 Baldwin Wallace U.
WI 47 42 00 Sep 30 Oct 04 Marquette Law School
WI 50 44 00 Sep 29 Oct 05 Ipsos
WI 48 43 00 Sep 23 Sep 27 Redfield and Wilton Strategies
WI 54 44 00 Sep 20 Sep 24 Marist Coll.
WI 50 41 00 Sep 08 Sep 22 Baldwin Wallace U.
WI 50 46 00 Sep 10 Sep 21 YouGov
WI 47 41 00 Sep 12 Sep 16 Redfield and Wilton Strategies
WI 48 43 00 Sep 11 Sep 16 Ipsos
WI 51 44 00 Sep 11 Sep 15 Civiqs
WI 52 42 00 Sep 09 Sep 13 SSRS
WI 52 46 00 Sep 08 Sep 13 Langer Research
WI 48 43 00 Sep 08 Sep 10 Siena Coll.
WI 51 44 00 Sep 06 Sep 08 Emerson Coll.
WI 50 43 00 Sep 01 Sep 10 Morning Consult
WI 50 44 00 Sep 02 Sep 04 YouGov
WI 50 45 00 Aug 28 Sep 08 Benenson Strategy/GS Strategy
WI 48 44 00 Aug 30 Sep 03 Marquette Law School
WI 50 41 00 Aug 30 Sep 04 Redfield and Wilton Strategies
WI 51 43 00 Sep 01 Sep 02 Pulse Opinion Research
WI 50 42 00 Aug 29 Sep 01 Fox News
WI 52 43 00 Aug 21 Aug 30 Morning Consult
WI 53 40 00 Aug 21 Aug 28 Opinium
WI 49 39 00 Aug 16 Aug 19 Redfield and Wilton Strategies
WI 51 45 00 Aug 13 Aug 17 Civiqs
WI 49 43 00 Aug 07 Aug 16 Morning Consult
WI 50 46 00 Aug 04 Aug 09 Marquette Law School
WI 48 42 00 Aug 04 Aug 07 YouGov
WI 55 43 00 Aug 05 Aug 06 Pulse Opinion Research
WI 45 35 00 Jul 19 Jul 24 Redfield and Wilton Strategies
WI 50 43 00 Jul 17 Jul 26 Morning Consult
WI 45 36 00 Jun 14 Jun 19 Redfield and Wilton Strategies
WI 51 42 00 Jun 14 Jun 18 Marquette Law School
WI 49 38 00 Jun 08 Jun 15 Siena Coll.
WI 49 40 00 May 30 Jun 02 Fox News
WI 48 38 00 May 10 May 14 Redfield and Wilton Strategies
WI 46 43 00 May 03 May 07 Marquette Law School
WI 50 45 00 Apr 20 Apr 21 PPP
WI 43 40 00 Apr 15 Apr 20 Ipsos
WI 48 45 00 Mar 24 Mar 29 Marquette Law School
WI 45 45 00 Mar 17 Mar 25 Baldwin Wallace U.
WI 48 45 00 Mar 10 Mar 11 PPP
WI 44 42 00 Mar 06 Mar 08 YouGov
WI 46 46 00 Feb 19 Feb 23 Marquette Law School
WI 42 49 00 Feb 12 Feb 18 Quinnipiac U.
WI 45 43 00 Feb 11 Feb 20 YouGov
WI 42 44 00 Feb 06 Feb 18 Expedition Strategies
WI 49 45 00 Jan 08 Jan 12 Marquette Law School
WI 46 41 00 Jan 05 Jan 08 Fox News
WY 23 70 00 Jan 02 Jan 02 Election 2016
`;

// function readFile (file){
//     var rawFile = new XMLHttpRequest();
//     rawFile.open("GET", file, false);
//     rawFile.onreadystatechange = function (){
//         if(rawFile.readyState === 4){
//             if(rawFile.status === 200 || rawFile.status == 0){
//                 var allText = rawFile.responseText;
//                 raw_results = allText;
//             }
//         }
//     }
//     rawFile.send(null);
// }


// let pathToDataFile = "../data.txt"
// readFile(pathToDataFile)

let DOM_MAP = document.getElementById("interactive-map");
let US_States = [
  "AK", "AL", "AR", "AZ", "CA", "CO", 
  "CT", "DC", "DE", "FL", "GA", "HI", 
  "IA", "ID", "IL", "IN", "KS", "KY", 
  "LA", "MA", "MD", "ME", "MI", "MN", 
  "MO", "MS", "MT", "NC", "ND", "NE", 
  "NH", "NJ", "NM", "NV", "NY", "OH", 
  "OK", "OR", "PA", "RI", "SC", "SD", 
  "TN", "TX", "UT", "VA", "VT", "WA", 
  "WI", "WV", "WY"
]; 

let US_Sates_full = [
  'Alaska','Alabama','Arkansas','Arizona','California','Colorado',
  'Connecticut','District of Columbia','Delaware','Florida','Georgia', 'Hawaii', 
  'Iowa','Idaho','Illinois','Indiana','Kansas','Kentucky',
  'Louisiana','Massachusetts','Maryland','Maine','Michigan','Minnesota',
  'Missouri','Mississippi','Montana','North Carolina','North Dakota','Nebraska',
  'New Hampshire','New Jersey','New Mexico','Nevada','New York','Ohio',
  'Oklahoma','Oregon','Pennsylvania','Rhode Island','South Carolina','South Dakota',
  'Tennessee','Texas','Utah','Virginia','Vermont','Washington',
  'Wisconsin','West Virginia','Wyoming'
];

let state_averages_dem = {}; // dictionary of STATE : AVERAGE for Democrats
let state_averages_rep = {}; // dictionary of STATE : AVERAGE for Republicans
let state_averages_occs = {}; // dictionary of STATE : NUM of Occurrences
// Fata format from source:
// State  Dem-%    GOP-%    Ind-%    Starting-month    Starting-day    Ending-month    Ending-day    Pollster

let rawResultsList = raw_results.split("\n");
// console.log(rawResultsList);

// Initializing the occ's with 0's
// Initializing the sums with 0's
for (i in US_States){
  state_averages_occs[US_States[i]]=0;
  state_averages_dem[US_States[i]]=0;
  state_averages_rep[US_States[i]]=0;
}

// Calculating the state sums
for (i in rawResultsList){
    let line = rawResultsList[i].split(" ");
    state_averages_occs[line[0]]++;
    state_averages_dem[line[0]]+=parseInt(line[1]);
    state_averages_rep[line[0]]+=parseInt(line[2]);
} 

for (i in US_States){
  state_averages_dem[US_States[i]]/=state_averages_occs[US_States[i]];
  state_averages_rep[US_States[i]]/=state_averages_occs[US_States[i]];
}

// console.log(state_averages_dem);
// console.log(state_averages_rep);

let max_diff = state_averages_rep[US_States[0]] - state_averages_dem[US_States[0]];
let min_diff = state_averages_rep[US_States[0]] - state_averages_dem[US_States[0]];

for (i =1; i< US_States.length; i++){
  if (max_diff<state_averages_rep[US_States[i]] - state_averages_dem[US_States[i]]){
      max_diff=state_averages_rep[US_States[i]] - state_averages_dem[US_States[i]];
  }
  if (min_diff>state_averages_rep[US_States[i]] - state_averages_dem[US_States[i]]){
    min_diff=state_averages_rep[US_States[i]] - state_averages_dem[US_States[i]];
  }
}

// console.log(min_diff);
// console.log(max_diff);
let mid = (min_diff + max_diff) / 2;
let colors = [];
let polling_outcomes = [];

for (i in US_States){
  polling_outcomes[i]="Dem=" + Math.floor(state_averages_dem[US_States[i]]) + "%, Rep=" + Math.floor(state_averages_rep[US_States[i]]) +"<br>" + US_Sates_full[i];
  if (state_averages_dem[US_States[i]]-state_averages_rep[US_States[i]] > 0){
    // blue
    colors[i] = Math.floor(mid - Math.abs(state_averages_dem[US_States[i]] - state_averages_rep[US_States[i]]));
  }
  else { // red
    colors[i] =   Math.floor(mid + Math.abs(state_averages_dem[US_States[i]] - state_averages_rep[US_States[i]]));
  }
}

var data = [{
  type: "choroplethmapbox", 
  locations: US_States, 
  text: polling_outcomes,
  z: colors, 
  zmin: min_diff, 
  zmax: max_diff,
  colorbar: {
    autotic: true,
    title: 'mid_pointÂ±|%rep-%dem|'},
  geojson: "https://raw.githubusercontent.com/python-visualization/folium/master/examples/data/us-states.json"
}];

let lat =  38;
let long = -96;
var layout = {mapbox: {center: {lon: long, lat: lat}, zoom: 2.8},
              width: 1000, height:490};

var config = {mapboxAccessToken: "pk.eyJ1IjoibWhhdGVtIiwiYSI6ImNrZzl6MXN2cTAyNDgycWxsanZ5YnRvYzQifQ.U2Wlr7Ok0SNY1jA2Kn6dUQ"};

Plotly.newPlot('main-content', data, layout, config);
